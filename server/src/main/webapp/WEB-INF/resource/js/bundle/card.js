webpackJsonp([0],[function(e,t,n){"use strict";var a=n(1),c=n(62),r=new a({html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,highlight:function(){return""}}),s=React.createClass({displayName:"Card",getInitialState:function(){return{display:"key"}},componentWillReceiveProps:function(){this.setState({display:"key"})},handleClick:function(){"key"==this.state.display?this.setState({display:"value"}):this.setState({display:"key"})},render:function(){return React.createElement("div",{className:"ui centered card",style:{minWidth:"20rem"}},React.createElement("div",{className:"content",onClick:this.handleClick},React.createElement("div",{className:"description center aligned",style:{fontSize:"20px"}},React.createElement("div",{dangerouslySetInnerHTML:{__html:r.render(this.props.content[this.state.display])}}))),React.createElement("div",{className:"extra content"},!this.props.isFirst&&React.createElement("span",{className:"left floated "},React.createElement("button",{className:"ui icon primary button",onClick:this.props.onLeftClick},React.createElement("i",{className:"arrow left icon"}))),!this.props.isLast&&React.createElement("span",{className:"right floated "},React.createElement("button",{className:"ui icon primary button",onClick:this.props.onRightClick},React.createElement("i",{className:"arrow right icon"})))))}}),i=React.createClass({displayName:"Cards",getInitialState:function(){return{current:0}},handleClick:function(){this.state.current<this.props.contents.length-1&&this.setState({current:this.state.current+1})},setCurrent:function(e){e<0||e>=this.props.contents.length||this.setState({current:e})},renderCard:function(e){var t=this;if(e>=this.props.contents.length||e<0)return null;var n=this.props.contents[e],a=!1,c=!1;return 0==e&&(a=!0),e==this.props.contents.length-1&&(c=!0),React.createElement(s,{content:n,isFirst:a,isLast:c,onLeftClick:function(){return t.setCurrent(t.state.current-1)},onRightClick:function(){return t.setCurrent(t.state.current+1)}})},render:function(){return React.createElement("div",{className:"ui container",style:{margin:"2rem"}},this.renderCard(this.state.current))}}),l=React.createClass({displayName:"Button",getInitialState:function(){return{isInsert:!1}},onInsertClick:function(){this.setState({isInsert:!0})},onConfirmClick:function(){var e=this.refs.key.value,t=this.refs.value.value,n={key:e,value:t},a=this;Ajax.post("/api/cards",n,{success:function(e){a.props.onChange(e)}}),this.setState({isInsert:!1})},onCancelClick:function(){this.setState({isInsert:!1})},render:function(){return React.createElement("div",null,React.createElement("div",{className:"blue ui buttons"},React.createElement("button",{className:"ui small primary button",style:{margin:"10px 0 10px 0"},onClick:this.props.memoryclick},"记忆模式"),React.createElement("button",{className:"ui small primary button",style:{margin:"10px 0 10px 0"},onClick:this.onInsertClick},"新增")),"      ",React.createElement(c,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},this.state.isInsert&&React.createElement("div",{className:"ui form",style:{maxWidth:"14rem",padding:"14px",border:"1px solid #ced6d5"}},React.createElement("div",{className:"field"},React.createElement("label",null,"正面"),React.createElement("textarea",{rows:"3",ref:"key",style:{backgroundColor:"rgb(255, 255, 249)"}})),React.createElement("div",{className:"field"},React.createElement("label",null,"反面"),React.createElement("textarea",{rows:"3",ref:"value",style:{backgroundColor:"rgb(255, 255, 249)"}})),React.createElement("button",{className:"ui small teal button",onClick:this.onConfirmClick},"提交"),React.createElement("button",{className:"ui small button",onClick:this.onCancelClick},"取消"))))}}),o=React.createClass({displayName:"CardList",renderCard:function(e){var t=this,n=function(){Ajax.delete("/api/cards",e,{success:function(e){t.props.onChange(e)}})};return React.createElement("div",{className:"card-item ui grid",key:e.id},React.createElement("div",{className:"fifteen wide column",style:{padding:"0 0 0 14px"}},React.createElement("div",{className:"title"},React.createElement("span",{dangerouslySetInnerHTML:{__html:r.render(e.key)}})),React.createElement("div",{className:"content"},React.createElement("span",{className:"transition hidden",dangerouslySetInnerHTML:{__html:r.render(e.value)}}))),React.createElement("div",{className:"one wide column",style:{padding:"14px 0 14px 0"}},React.createElement("button",{className:"ui mini icon button",style:{background:"white"},onClick:n},React.createElement("i",{className:"trash outline icon"}))))},componentDidMount:function(){$(".ui.accordion").accordion()},render:function(){var e=this,t=this.props.contents.map(function(t){return e.renderCard(t)});return React.createElement("div",{className:"ui styled fluid accordion"},t)}}),u=React.createClass({displayName:"Box",getDefaultProps:function(){var e=new Array;return{contents:e}},getInitialState:function(){return{contents:this.props.contents,memoryMode:!1}},componentDidMount:function(){var e,t=this,n=new EventSource(CONTEXT+"/api/stream/cards");n.onmessage=function(n){console.debug("event source"),n.data!=e&&(console.debug("refresh"),t.setState({contents:JSON.parse(n.data)}),e=n.data)}},render:function(){var e=this,t=this.state.memoryMode;return t?React.createElement("div",{id:"card-box",className:"ui grid"},React.createElement("div",null,React.createElement("button",{className:"ui primary button",onClick:function(){return e.setState({memoryMode:!1})}},"退出")),React.createElement(i,{contents:this.state.contents})):React.createElement("div",{id:"card-box",className:"ui grid"},React.createElement("div",{className:"four wide column"},React.createElement(l,{memoryclick:function(){return e.setState({memoryMode:!0})},onChange:function(t){return e.setState({contents:t})}})),React.createElement("div",{className:"twelve wide column"},React.createElement("div",{id:"card-list"},React.createElement("div",{className:"ui cotainer"},React.createElement(o,{contents:this.state.contents,onChange:function(t){return e.setState({contents:t})}})))))}});$(document).ready(function(){ReactDOM.render(React.createElement(u,null),document.getElementById("card"))})}]);